apiVersion: apps/v1
kind: Deployment
metadata:
  name: ecommerce-shop-dev-client-deployment
  namespace: ecommerce-shop-dev-client
  labels: {app: ecommerce-shop-dev-client}
spec:
  replicas: 1
  revisionHistoryLimit: 3
  selector: {matchLabels: {app: ecommerce-shop-dev-client}}
  strategy:
    type: RollingUpdate
    rollingUpdate: {maxSurge: 1, maxUnavailable: 0}
  template:
    metadata:
      labels: {app: ecommerce-shop-dev-client}
    spec:
      containers:
        - name: ecommerce-shop-dev-client
          image: trivip002/ecommerce-shop-dev-client:97221098c5068c7e62ce6aaa66664462fb800328
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 5200
          resources:
            requests: {cpu: "100m", memory: "256Mi"}
            limits: {memory: "512Mi"}
          readinessProbe:
            httpGet: {path: /, port: 5200}
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 2
          livenessProbe:
            httpGet: {path: /, port: 5200}
            initialDelaySeconds: 30
            periodSeconds: 10
            timeoutSeconds: 2
          startupProbe:
            tcpSocket: {port: 5200}
            periodSeconds: 5
            failureThreshold: 60
          lifecycle:
            preStop:
              exec: {command: ["/bin/sh", "-lc", "sleep 5"]}
